# ArchiAI Platform Environment Variables
# Copy this file to .env and fill in your actual API keys
# DO NOT commit your actual .env file - it's gitignored for security

# ============================================
# REQUIRED - Primary AI Service
# ============================================

# Together AI (PRIMARY - Required for FLUX image generation and Qwen reasoning)
# Get your API key at: https://api.together.ai/settings/api-keys
# NOTE: Requires paid tier (Build Tier 2+) - add $5-10 credits at https://api.together.ai/settings/billing
# Uses Qwen 2.5 72B for reasoning and FLUX.1-dev for A1 sheet generation
TOGETHER_API_KEY=your_together_api_key_here

# Toggle to use Together AI (should be 'true' for A1-only mode)
REACT_APP_USE_TOGETHER=true

# ============================================
# REQUIRED - Location Services
# ============================================

# Google Maps API (Required for geocoding, maps, and 3D visualization)
# Get your API key at: https://console.cloud.google.com/apis/credentials
# Enable: Maps JavaScript API, Geocoding API, Places API
REACT_APP_GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# Optional: Map ID for AdvancedMarkerElement support
# Create in Google Cloud Console under Maps > Map Management
# REACT_APP_GOOGLE_MAPS_MAP_ID=your_map_id_here

# OpenWeather API (Required for climate data analysis)
# Get your free API key at: https://openweathermap.org/api
REACT_APP_OPENWEATHER_API_KEY=your_openweather_api_key_here

# ============================================
# OPTIONAL - Fallback Services
# ============================================

# OpenAI API Keys (Optional - used as fallback for reasoning)
# Get your API key at: https://platform.openai.com/api-keys
# Note: Together.ai is the primary service; OpenAI is only used as fallback

# For GPT-4 Design Reasoning (optional fallback)
OPENAI_REASONING_API_KEY=your_openai_api_key_here

# For DALL-E 3 Image Generation (optional fallback)
OPENAI_IMAGES_API_KEY=your_openai_api_key_here

# ============================================
# OPTIONAL - Advanced Features
# ============================================

# Anthropic Claude (Optional - experimental reasoning and vision)
# Get your API key at: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# FAL.AI (Optional - Flux Fill inpainting endpoint)
# Get your API key at: https://fal.ai/
FAL_KEY=your_fal_key_here

# Maginary.ai (Optional - alternative image generation)
# Get your API key at: https://maginary.ai/api
MIDJOURNEY_API_KEY=your_midjourney_key_here

# Meshy (REQUIRED for 3D mode - text-to-3D model generation)
# Get your API key at: https://www.meshy.ai/api
# NOTE: Required when meshy3DMode feature flag is enabled
# Without this key, 3D model generation will be silently disabled
MESHY_API_KEY=your_meshy_api_key_here

# Stability AI (Optional - alternative image generation)
# Get your API key at: https://platform.stability.ai/account/keys
STABILITY_API_KEY=your_stability_api_key_here

# OpenRouter (Optional - LLM load balancer)
# Get your API key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=your_openrouter_key_here

# ============================================
# PIPELINE MODE
# ============================================

# Pipeline mode for A1 generation
# Only "multi_panel" is supported; other modes (single_shot, geometry_first,
# hybrid_openai) are not implemented and will fail with UnsupportedPipelineModeError.
PIPELINE_MODE=multi_panel

# OpenAI model for image generation (hero_3d, interior_3d panels)
# Default: gpt-image-1 (dall-e-3 deprecated May 2026)
OPENAI_IMAGE_MODEL=gpt-image-1

# ============================================
# P0 GATES & CDS CONFIGURATION
# ============================================

# CDS (Canonical Design State) required before panel generation
# When true, pipeline builds ProgramLock + CDS from user input
ARCHIAI_CDS_REQUIRED=true

# ProgramSpacesLock required before panel generation
# When true, every run must build a hard lock from user spaces
ARCHIAI_PROGRAM_LOCK_REQUIRED=true

# Geometry authority mode: "enforce" (default) or "shadow"
# enforce: canonical pack required + fail-closed gates
# shadow: canonical pack built but not required for generation
ARCHIAI_GEOMETRY_AUTHORITY_MODE=enforce

# DNA schema version used by CDS/program lock tooling
ARCHIAI_DNA_SCHEMA_VERSION=2

# Program Compliance Gate mode: "hard" (block on violation) or "warn" (log only)
ARCHIAI_PROGRAM_GATE_MODE=hard

# Drift Gate mode: "hard" (block on drift) or "warn" (log only)
ARCHIAI_DRIFT_GATE_MODE=hard

# Require geometry mask for floor plans (no "invented" plans)
ARCHIAI_REQUIRE_GEOMETRY_MASK=true

# Allow fallback to default/placeholder technical drawings
ARCHIAI_ALLOW_TECHNICAL_FALLBACK=false

# Maximum allowable program violations (0 = strict)
ARCHIAI_MAX_PROGRAM_VIOLATIONS=0

# Maximum allowable level mismatches (0 = strict)
ARCHIAI_MAX_LEVEL_MISMATCH=0

# Maximum drift score before blocking (0.00-1.00)
ARCHIAI_DRIFT_THRESHOLD=0.10

# ============================================
# MODEL ROUTING (per-task model selection)
# ============================================

# LLM for DNA generation (structured JSON)
# AI_MODEL_DNA=meta-llama/Llama-3.3-70B-Instruct-Turbo

# LLM for architectural reasoning
# AI_MODEL_REASONING=meta-llama/Llama-3.3-70B-Instruct-Turbo

# Image model for styled panels (hero, interior, axonometric)
# AI_MODEL_IMAGE=black-forest-labs/FLUX.1-kontext-max

# Image model for 3D renders
# AI_MODEL_3D=black-forest-labs/FLUX.1-dev

# LLM for modify reasoning
# AI_MODEL_MODIFY=meta-llama/Llama-3.3-70B-Instruct-Turbo

# Image model for modify img2img
# AI_MODEL_MODIFY_IMAGE=black-forest-labs/FLUX.1-kontext-max

# OpenAI emergency/high-complexity reasoning
# OPENAI_MODEL_REASONING=gpt-5.2

# OpenAI portfolio/style analysis
# OPENAI_MODEL_PORTFOLIO=gpt-5.2

# QA critic (optional, expensive)
# AI_MODEL_QA_CRITIC=claude-opus-4-1

# ============================================
# EXPERIMENTAL FEATURE FLAGS
# ============================================

# Enable ControlNet-based multi-view generation (experimental)
# REACT_APP_USE_CONTROLNET_WORKFLOW=false

# ============================================
# GENARCH PIPELINE (RunPod Deployment)
# ============================================

# RunPod genarch server URL (Vercel production only)
# This is where the genarch pipeline runs (GPU server with Python/Blender)
# Set this in Vercel environment variables, NOT in the browser
# Example: https://genarch.yourdomain.com or https://xxx-3001.proxy.runpod.net
RUNPOD_GENARCH_URL=https://genarch.yourdomain.com

# API key for genarch floor plan generation endpoints
# Used by: RunPod server (to validate requests) and Vercel proxy (to authenticate)
# Generate a random key: openssl rand -hex 32
GENARCH_API_KEY=your_genarch_api_key_here

# API key for geometry rendering endpoints (server-side, optional)
# Falls back to GENARCH_API_KEY if not set
# GEOMETRY_API_KEY=your_geometry_api_key_here

# Frontend API key (development only - NOT needed in production)
# In production, Vercel proxy adds the API key server-side
# Only set this for local development with npm run dev
REACT_APP_GENARCH_API_KEY=your_genarch_api_key_here

# Disable API key auth in development (default: true in production)
# API_KEY_AUTH_ENABLED=true

# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 1. Copy this file: cp .env.example .env
# 2. Fill in your actual API keys (at minimum: TOGETHER_API_KEY, REACT_APP_GOOGLE_MAPS_API_KEY, REACT_APP_OPENWEATHER_API_KEY)
# 3. Never commit your .env file to version control
# 4. Verify all required keys: npm run check:env
# 5. Start development: npm run dev
#
# For production deployment on Vercel:
# - Add all environment variables in Vercel Dashboard → Settings → Environment Variables
# - Set for all environments (Production, Preview, Development)
# - Required variables: TOGETHER_API_KEY, REACT_APP_GOOGLE_MAPS_API_KEY, REACT_APP_OPENWEATHER_API_KEY
# ============================================
